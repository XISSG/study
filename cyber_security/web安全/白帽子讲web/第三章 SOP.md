# 第三章
# 同源策略（SOP）
同源策略是web应用最核心和最基本的安全功能，它限制了javascript不能读取其他源的资源
## 浏览器沙箱（SanBox）
现代浏览器都引入了多进程架构和沙箱机制，通过沙箱限制程序漏洞被进一步利用，多进程架构则可以确保单个页面或组件崩溃时不会影响整个浏览器
浏览器将工作拆分到多个进程中完成，主要进程包括：浏览器进程、GPU进程、渲染进程、扩展进程、插件进程、网络和存储等功能进程。
在Chrome中，浏览器进程也被称为代理进程（Broker），其他模块进程称为目标进程，目标进程运行在沙箱中。
在目标进程（Target）中，高风险的系统API调用会被拦截器截获并通过进程间通信（Inter-Process Communication，IPC)方式转发给代理进程，该调用行为需要通过代理进程的策略引擎检测后才会执行并返回结果，违反策略的调用行为将直接返回失败。
沙箱结构
![kkyh3qnc4b](vx_images/448137732951468.png =500x)
Chrome提供“站点隔离”（Site Isolation）特性，确保不同站点的页面被放在不同的进程中渲染，即使是一个标签页中的网页通过iframe加载了不同站点的页面，它们也将在不同的进程中进程渲染
站点隔离是同源策略之后另一道防线，即使攻击者找到了漏洞，能绕过同源策略的限制，也还是被限制在当前站点的沙箱进程中
## XSS保护（CSP）
使用内容安全策略CSP来防御XSS。CSP本质上是一个白名单机制，告诉浏览器那些可信资源是允许加载的
## 隐私策略
目前尚无成熟方案
## 浏览器扩展
投毒风险
## 浏览器安全
识别钓鱼网站、EV SSL证书、HTTP不安全高亮提醒、同形异义体检测